(function(){var h=GooglePlusScannerHelper,k=GooglePlusFixHelper,c=function(){this.ScannerHelper=new h;this.FixHelper=new k;this.responseHeaderFixSingle=GPPFixSingleResponse};c.prototype.fixSingle=function(c,f){function h(a){var c=b.FixHelper.handleResponse(d,e,a);if(!c)return a=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.code,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.description,"Web content parse error! ID: "+d+", value: "+e+", webData: "+a)).getResponse(),
PSDebug.error(a),f(a);a=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.OK.code,ReturnCodeEnum.OK.description,c)).getResponse();PSDebug.log(a);return f(a)}function k(a){a=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.NETWORK_ERROR.code,ReturnCodeEnum.NETWORK_ERROR.description)).getResponse();PSDebug.error(a);return f(a)}function l(){if(GooglePlusIsPageLoadComplete(TMExt_$(document))){var a=b.FixHelper.performFix(d,e),c=b.FixHelper.handleResponse(d,e,a);c?(a=(new APIResponseHelper(b.responseHeaderFixSingle,
ReturnCodeEnum.OK.code,ReturnCodeEnum.OK.description,c)).getResponse(),PSDebug.log(a)):(a=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.PERFORM_CLICK_FAIL.code,ReturnCodeEnum.PERFORM_CLICK_FAIL.description,"perform click fail! ID: "+d+", value: "+e+", result: "+a)).getResponse(),PSDebug.error(a));f(a)}else setTimeout(l,500)}var d=c.id,e=c.value,b=this;if(!b.ScannerHelper.isValidID(d)){var g=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.INVALID_ID.code,ReturnCodeEnum.INVALID_ID.description,
"wrong ID! : "+d+", availableIDS: "+b.ScannerHelper.getAllvalidID())).getResponse();PSDebug.error(g);return f(g)}if(!b.FixHelper.isValidFixValue(d,e))return g=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.INVALID_FIX_VALUE.code,ReturnCodeEnum.INVALID_FIX_VALUE.description,"wrong fix value! : "+e+", availableValues: "+b.FixHelper.getValidFixValueByID(d))).getResponse(),PSDebug.error(g),f(g);"21"==d?SendWebRequest(b.ScannerHelper.getSendData_endorsement_scan(),function(a){(a=b.ScannerHelper.handleResponse_endorsement_scan(TMExt_$(a)))&&
a.at?SendWebRequest(b.FixHelper.getSendData(d,e,a.at),h,k):(a=(new APIResponseHelper(b.responseHeaderFixSingle,ReturnCodeEnum.NOT_LOGGED_IN.code,ReturnCodeEnum.NOT_LOGGED_IN.description)).getResponse(),PSDebug.error(a),f(a))}):l()};window.GooglePlusPFixer=c})();
