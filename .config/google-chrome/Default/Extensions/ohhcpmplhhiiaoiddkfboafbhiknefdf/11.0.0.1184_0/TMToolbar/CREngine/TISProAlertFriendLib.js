function TSNSInsertAlertICON(c){try{if(IsInSNSWallAndMalicious(c)){var b=FindInsertPositionNode(c);if(!b||!b.previousSibling||"TSRSpan"!=b.previousSibling.className){var a=document.createElement("DIV");a.id="TAlertWindowID";TMExt_$(a).css({cursor:"pointer",margin:"5px 0px 7px 0px",height:"42px",width:"314px",border:"solid 1px","border-color":"#bfbfbf","background-color":"#f2f2f2"});a.className="TSRSpan";var d=g_oToolTipString.ShareToFriend.ShareMsg,f=TSREscapeURL(g_oImgDefine.ShareIcon);a.innerHTML=
["<table><tbody><tr><td id='TUMSAlertMsgID'><div>",d,"</div></td><td id='TUMSAlertMsgIconID'>","<img src='"+f+"'>","</td></tr></tbody></table>"].join("");var g=TMExt_$(a).find("#TUMSAlertMsgID");g.css({color:"#3F44D4",width:"230px",height:"35px","font-size":"12px","text-align":"left","text-decoration":"underline"});g.find("DIV").css({"margin-left":"5px"});TMExt_$(a).find("#TUMSAlertMsgIconID").css({width:"64px",height:"22px",margin:"0",padding:"0","background-color":"transparent"});a.onclick=function(){TShareToFriendHandler(c)};
b.parentNode.insertBefore(a,b)}}}catch(e){e.number&&e.description?(b="catch err:[\n"+("Facility Code: "+(e.number>>16&8191)+"\n"),b+="Number: "+(e.number&65535)+"\n",b+="Description: "+e.description+"\n",TMExt_debug(b)):TMExt_debug(e)}}
function FindInsertPositionNode(c){for(var b=TMExt_$(c.FindInsertNode()),a=b,d=0;!a.hasClass("_5pcr");){a=a.parent();if(a.hasClass("UFIList"))break;if(50==++d)break}if(0==a.length)for(a=b,d=0;"LI"!=a[0].tagName.toUpperCase()&&(a=a.parent(),50!=++d););b=a.find("form");0==c.HomePage&&(b=b.parent());c.formTag=b;return b[0]}
function IsInSNSWallAndMalicious(c){if(3!=c.level&&4!=c.level)return!1;var b=!1;try{if(/facebook\.com/.test(document.location)){var a=TMExt_$(c.FindInsertNode()),d=a,f=0;for(c.HomePage=1;!d.hasClass("_5pcr");){d=d.parent();if(d.hasClass("UFIList"))break;if(50==++f)break}if(0==d.length){d=a;for(f=0;"LI"!=d[0].tagName.toUpperCase()&&(d=d.parent(),50!=++f););c.HomePage=0}var g=d.find("input[data-ft][type='button']");1==g.length&&(TMExt_debug("Found comment of link:"+c.link),b=!0,c.ShareComment=g,c.ShareText=
d)}}catch(e){TMExt_debug(e)}return b}
function TShareToFriendHandler(c){if(c.ShareComment&&c.ShareText){c.ShareComment.click();var b=function(a){try{if(document.createEvent){var b=document.createEvent("KeyboardEvent");b.initKeyboardEvent("keydown",!0,!0,document.defaultView,!0,!0,!0,!1,0,90);a[0].dispatchEvent(b)}}catch(c){}try{a[0].fireEvent&&a[0].fireEvent("onkeydown")}catch(d){}try{document.createEvent&&(b=document.createEvent("KeyboardEvent"),b.initKeyEvent("keydown",!0,!0,null,!0,!0,!0,!1,90,0),a[0].dispatchEvent(b))}catch(h){}},
a=c.ShareText.find("TEXTAREA");if(1==a.length){var d=g_oToolTipString.ShareToFriend.ShareString;b(a);setTimeout(function(){a.focus();a.val("");a.val(d);c.formTag.find("input[name='add_comment_text']").attr("value",d);b(a);a.select()},500)}}};
