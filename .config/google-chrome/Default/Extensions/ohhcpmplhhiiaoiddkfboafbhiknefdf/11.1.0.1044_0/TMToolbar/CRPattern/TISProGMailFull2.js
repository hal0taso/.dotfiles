function TSWMGmailFull2FilterContentEditable(a){a=a.parentNode;for(var b=0;a&&10>b++;){if(a.tagName&&"DIV"==a.tagName.toUpperCase()&&a.attributes.contenteditable&&"true"==a.attributes.contenteditable.value)return!0;a=a.parentNode}return!1}function TSWMMGmailShowRatingResultUI(){var a=this.level;return g_oRatingLevel[a]==g_oImgDefine.Safe||g_oRatingLevel[a]==g_oImgDefine.Neutral||g_oRatingLevel[a]==g_oImgDefine.Trusted?!1:!0}
function TSWMGmailFetchTargetURL(a,b){if("http://www.google.com/url?q="==b.substr(0,28))return decodeURIComponent(b.substr(28,b.indexOf("&",28)-28));if("https://www.google.com/url?q="==b.substr(0,29))return decodeURIComponent(b.substr(29,b.indexOf("&",29)-29));pGoogle=/(^google\.)|(\.google\.)|(\/google\.)/;if(b&&(0<b.indexOf(".google.")||pGoogle.test(b)))return"";var c=new RegExp("^(http|https)://"+a,"i");return/^(http|https|ftp|ftps):\/\//i.test(b)&&!c.test(b)?b:""}
function TSWMGmailParseAdv(a){var b=new CreateTSRLocatedObject(null,null,"div",null);b.appendAttribute("class","^vb");b.multiMatches=!0;a=new CreateTSRLocatedObject(a,b,"div",null);a.appendAttribute("class","^oM");if(a=a.findElement())for(a=GetAllTSRLocatedNodes(a),b=0;b<a.length;b++){var c=a[b],e=c.firstChild?c.firstChild:null;if(e){var e=e.href,d=c.getAttribute("Rate");d&&"1"==d||(c.setAttribute("Rate","1"),CreateTSRResultObject(c.firstChild,e,null))}}}
function TSWMGmailParseBottomAdv(a){a=new CreateTSRLocatedObject(a,null,"div",null);a.appendAttribute("class","^Zs");a.multiMatches=!0;if(a=a.findElement()){a=GetAllTSRLocatedNodes(a);for(var b=0;b<a.length;b++){var c=a[b],e=c.firstChild?c.firstChild:null;if(e){var e=e.firstChild.href,d=c.getAttribute("Rate");d&&"1"==d||(c.setAttribute("Rate","1"),CreateTSRResultObject(c.firstChild.firstChild,e,null))}}}}
function TSWMGmailParseResult(a){var b=new CreateTSRLocatedObject(null,null,"A",null);if(b=(new CreateTSRLocatedObject(a,b,"BODY",null)).findElement()){b=GetAllTSRLocatedNodes(b);a=a.location.host;for(var c=0;c<b.length;c++){var e=TSWMGmailFetchTargetURL(a,b[c].href),d=b[c];0==e.length||d.parentNode&&d.parentNode.tagName&&d.parentNode.className&&"LI"==d.parentNode.tagName.toUpperCase()&&("GBT"==d.parentNode.className.toUpperCase()||"GBMTC"==d.parentNode.className.toUpperCase())||(d=b[c].getAttribute("Rate"),
d&&"1"==d||(b[c].setAttribute("Rate","1"),TSWMGmailFull2FilterContentEditable(b[c])||CreateTSRResultObject(b[c],e,null,TSWMMGmailShowRatingResultUI)))}}}g_bIsNeedCheckSPan=!0;TSRTagFlowID();function TSRParse(){var a=g_oEnv.Parser.iResultNumber;TSWMGmailParseResult(document);TSWMGmailParseAdv(document);TSWMGmailParseBottomAdv(document);TrendMicro.TB.ReduceNewNode(a+1);return g_oEnv.Parser.rgobjSearchResult};
