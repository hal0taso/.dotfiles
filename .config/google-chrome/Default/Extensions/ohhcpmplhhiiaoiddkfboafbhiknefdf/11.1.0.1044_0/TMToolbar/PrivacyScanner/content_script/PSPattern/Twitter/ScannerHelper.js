(function(){var g=TwitterScanResultsTemplate,c=function(){this.PROTOCOL_DOMAIN=PUtil.checkPage.IsFacebook()?window.location.protocol+"//"+window.location.host:"https://twitter.com"};c.prototype.logHeaderSendData="[Twitter Scan -> send data]";c.prototype.logHeaderHandleResponseData="[Twitter Scan -> handle response data]";c.prototype.getUserID=function(a){function b(a){try{var b=null;a.find("[data-user-id]").each(function(a,c){var f=TMExt_$(c).attr("data-user-id");if(""!=f)return b=f,!1});return b}catch(c){return null}}
return function(a){try{var b=a.find(".current-user .avatar");return 0!=b.length?b.eq(0).attr("data-user-id"):null}catch(c){return null}}(a)||b(a)};c.prototype.getUserName=function(a){return a.find(".current-user .fullname").eq(0).text()};c.prototype.getUserImageURL=function(a){return a.find(".current-user .avatar").eq(0).attr("src")||a.find(".js-action-profile-avatar").eq(0).attr("src")||a.find(".avatar[data-user-id]").eq(0).attr("src")};c.prototype.getSendData_SettingPage=function(){var a={type:"GET",
data:null,dataType:"html",url:null};a.url=this.PROTOCOL_DOMAIN;a.url+="/settings/safety";(new SendDataLogger(this.logHeaderSendData+" : getSendData_SettingPage",a)).getLog();return a};c.prototype.handleResponse_SettingPage=function(a){(new ResponseHandlerLogger(this.logHeaderHandleResponseData+", ID : handleResponse_SettingPage",a)).getLog();var b={user_id:null,scanResult:[],scanResult_incomplete:!1};try{b.user_id=this.getUserID(a)}catch(c){PSDebug.error(c),b.user_id=null}try{var e=this.getScanResultSampleByID("11");
e.Current=a.find("#user_protected")[0].checked?1:0;e.Title=a.find("#user_protected_fieldset label.checkbox").text();e.Desc=TMExt_$(a.find("#user_protected_fieldset div.controls p")[0].childNodes[0]).text();b.scanResult.push(e)}catch(g){PSDebug.error(g),b.scanResult_incomplete=!0}try{var l=this.getScanResultSampleByID("12");l.Current=a.find("#user_discoverable_by_email")[0].checked?1:0;l.Title=TMExt_$(a.find("#discoverability_fieldset div.controls label.checkbox")[0]).text().replace(/(^\s*)|(\s*$)/g,
"");l.Desc=TMExt_$(a.find("#discoverability_fieldset div.controls label.checkbox")[0]).text().replace(/(^\s*)|(\s*$)/g,"");b.scanResult.push(l)}catch(n){PSDebug.error(n),b.scanResult_incomplete=!0}try{var f=this.getScanResultSampleByID("13");f.Current=a.find("#use_cookie_personalization")[0].checked?1:0;var p=TMExt_$(a.find("#use_cookie_personalization")).parent().parent();f.Title=p.find("label.checkbox").text().replace(/(^\s*)|(\s*$)/g,"");f.Desc=f.Title;b.scanResult.push(f)}catch(q){PSDebug.error(q),
b.scanResult_incomplete=!0}try{var d=this.getScanResultSampleByID("14");d.Current=a.find("#user_geo_enabled")[0].checked?1:0;d.Title=TMExt_$(a.find("#user_geo_enabled")).parent().text();d.Desc=d.Title;b.scanResult.push(d)}catch(r){PSDebug.error(r),b.scanResult_incomplete=!0}try{d=this.getScanResultSampleByID("15"),d.Current=a.find("#allow_ads_personalization")[0].checked?1:0,d.Title=TMExt_$(a.find("#allow_ads_personalization")).parent().text(),d.Desc=d.Title,b.scanResult.push(d)}catch(s){PSDebug.error(s),
b.scanResult_incomplete=!0}try{var h=this.getScanResultSampleByID("16"),k=a.find("#allow_media_tagging_fieldset input"),m;a:{for(e=0;e<k.length;e++)if(k.eq(e)[0].checked){m=e;break a}m=0}h.Current=m;h.Title=a.find("#allow_media_tagging_fieldset legend").text();h.Desc=h.Title;h.PossibleValue={0:k.eq(0).parent().text(),1:k.eq(1).parent().text(),2:k.eq(2).parent().text()};b.scanResult.push(h)}catch(t){PSDebug.error(t),b.scanResult_incomplete=!0}return b};c.prototype.getAllvalidID=function(){for(var a=
[],b=0;b<g.length;b++)a.push(g[b].ID);return a};c.prototype.isValidID=function(a){for(var b=this.getAllvalidID(),c=0;c<b.length;c++)if(a==b[c])return!0;return!1};c.prototype.getScanResultSampleByID=function(a){for(var b=0;b<g.length;b++)if(g[b].ID==a)return PUtil.cloneObj(g[b])};window.TwitterScannerHelper=c})();
