(function(){var f=function(){this.PROTOCOL_DOMAIN=PUtil.checkPage.IsLinkedIn()?window.location.protocol+"//"+window.location.host:"https://www.facebook.com";this.responseHeaderScanSingle=LIPScanSingleResponse;this.responseHeaderScan=LIPScanResponse};f.prototype.scanSingle=function(d,h){function a(a){a=(new APIResponseHelper(e.responseHeaderScanSingle,ReturnCodeEnum.NETWORK_ERROR.code,ReturnCodeEnum.NETWORK_ERROR.description)).getResponse();PSDebug.error(a);return h(a)}var e=this,c=null,c=new LinkedinScannerHelper;
return function(){if(!c.isValidID(d)){var g=(new APIResponseHelper(e.responseHeaderScanSingle,ReturnCodeEnum.INVALID_ID.code,ReturnCodeEnum.INVALID_ID.description,"wrong ID! : "+d+", availableIDS: "+c.getAllvalidID())).getResponse();PSDebug.error(g);return h(g)}SendWebRequest(c.getSendData_setting(),function(g){SendWebRequest(c.getSendData_wording(d),function(a){var b=JSON.parse(g);(b=c.handleResponse(d,a,b))&&""==TMExt_$.trim(b.Title)&&(b=null);b?(a=(new APIResponseHelper(e.responseHeaderScanSingle,
ReturnCodeEnum.OK.code,ReturnCodeEnum.OK.description,b)).getResponse(),PSDebug.log(a)):(a=(new APIResponseHelper(e.responseHeaderScanSingle,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.code,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.description,"Web content parse error! ID: "+d+", webData: "+a)).getResponse(),PSDebug.error(a));h(a)},a)},a)}()};f.prototype.scan=function(d){function h(b){if(!f){if(b[a.responseHeaderScanSingle].ReturnCode==ReturnCodeEnum.OK.code)e.push(PUtil.cloneObj(b[a.responseHeaderScanSingle].Response));
else if(b[a.responseHeaderScanSingle].ReturnCode==ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.code)k=!0;else return b=(new APIResponseHelper(a.responseHeaderScan,b[a.responseHeaderScanSingle].ReturnCode,b[a.responseHeaderScanSingle].Description,b[a.responseHeaderScanSingle].Response)).getResponse(),PSDebug.error(b),f=!0,d(b);g++;if(g==c)return b=k?(new APIResponseHelper(a.responseHeaderScan,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR_COULD_USE_PARTLY.code,ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR_COULD_USE_PARTLY.description,
e)).getResponse():(new APIResponseHelper(a.responseHeaderScan,ReturnCodeEnum.OK.code,ReturnCodeEnum.OK.description,e)).getResponse(),PSDebug.log(b),PSDebug.log("do scan finish"),d(b)}}var a=this,e=[],c=LinkedinScanResultsTemplate.length,g=0,f=!1,k=!1;return function(){for(var b=0;b<c;b++)a.scanSingle(LinkedinScanResultsTemplate[b].ID,h)}()};f.prototype.Website="LINKEDIN";window.LinkedinPScanner=f})();
