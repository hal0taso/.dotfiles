(function(){window.checkLogInTimerList={FACEBOOK:!1,TWITTER:!1,GOOGLEPLUS:!1,LINKEDIN:!1};window.reFixList={FACEBOOK:null,TWITTER:null,GOOGLEPLUS:null,LINKEDIN:null};window.UserWeHaveScanned={FACEBOOK:null,TWITTER:null,GOOGLEPLUS:null,LINKEDIN:null};window.get_siteHelper=function(b){switch(b){case FACEBOOK:return new s;case TWITTER:return new t;case GOOGLEPLUS:return new u;case LINKEDIN:return new v}return new q};window.get_Website_fromResponse=function(b){if(FPScanSingleResponse in b||FPScanResponse in
b||FPFixSingleResponse in b)return FACEBOOK;if(TPScanSingleResponse in b||TPScanResponse in b||TPFixSingleResponse in b)return TWITTER;if(GPPScanSingleResponse in b||GPPScanResponse in b||GPPFixSingleResponse in b)return GOOGLEPLUS;if(LIPScanSingleResponse in b||LIPScanResponse in b||LIPFixSingleResponse in b)return LINKEDIN};var q=function(){BaseScannerHelper.call(this);var b=this;this.openNewTabWithURL=function(a){SendRequestToBackground_Website(null,null,"login","ContentPage_Background",null,null,
a,!0,!1)};this.open_help_link=function(a){SendRequestToBackground_openFaqPage("ALL",a);DCA_UTIL.lstHelpUsageInfo(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[b.Website],a,1)};this.alertMessageInTabContent_pleaseSignIn=function(){var a=this;PUtil.checkBrowser.IsSafari()?a.alertMessageInTabContent(a.ConstructAlertMessageInContent_titleLink({title:{wording:GetPSL10NString("ALERT_LOG_IN_SAFAFI_NEED_CHECKED_WHEN_SCAN"),learnMore:GetPSL10NString("ALERT_LOG_IN_SAFAFI_NEED_CHECKED_LEARN_MORE"),link_clickEvent:a.safari_log_in_learn_more},
button_content:GetPSL10NString("ALERT_SIGN_IN_BUTTON"),callback:function(){a.openNewTabWithURL(a.URL_ACCOUNT_PAGE);a.checkLogInAndRefreshWrapper()}})):a.alertMessageInTabContent(a.ConstructAlertMessageInContent({title:GetPSL10NString("ALERT_LOG_IN_TITLE"),button_content:GetPSL10NString("ALERT_SIGN_IN_BUTTON"),callback:function(){a.openNewTabWithURL(a.URL_ACCOUNT_PAGE);a.checkLogInAndRefreshWrapper()}}))};this.alertMessageInTabContent_signInToFix=function(){var a=this;PUtil.checkBrowser.IsSafari()?
a.alertMessageInTabContent(a.ConstructAlertMessageInContent_titleLink({title:{wording:GetPSL10NString("ALERT_LOG_IN_SAFAFI_NEED_CHECKED_WHEN_FIX"),learnMore:GetPSL10NString("ALERT_LOG_IN_SAFAFI_NEED_CHECKED_LEARN_MORE"),link_clickEvent:a.safari_log_in_learn_more},button_content:GetPSL10NString("ALERT_SIGN_IN_BUTTON"),callback:function(){a.openNewTabWithURL(a.URL_ACCOUNT_PAGE);a.checkLogInAndRefreshWrapper()}})):a.alertMessageInTabContent(a.ConstructAlertMessageInContent({title:GetPSL10NString("ALERT_SIGN_IN_TO_FIX_TITLE"),
button_content:GetPSL10NString("ALERT_SIGN_IN_BUTTON"),callback:function(){a.openNewTabWithURL(a.URL_ACCOUNT_PAGE);a.checkLogInAndRefreshWrapper()}}));a.UpdateNumberOfConcerns()};this.alertMessageInTabContent_networkError=function(){b.alertMessageInTabContent(b.ConstructAlertMessageInContent({title:GetPSL10NString("NETWORK_ERROR_CONTENT"),button_content:GetPSL10NString("ALERT_TRY_AGAIN_BUTTON"),callback:function(){b.ForceScan()}}));DCA_UTIL.lstErrorPageUsageInfo(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[b.Website],
DCA_CONSTANTS.ERROR_ID.NETWORK_ERROR,1)};this.alertMessageInTabContent_timeoutError=function(){var a=this;a.alertMessageInTabContent(a.ConstructAlertMessageInContent_titleLink({title:{wording:GetPSL10NString("ALERT_SOMETHING_WENT_WRONG_TITLE"),learnMore:GetPSL10NString("ALERT_LOG_IN_SAFAFI_NEED_CHECKED_LEARN_MORE"),link_clickEvent:function(){a.open_help_link(DCA_CONSTANTS.HELP_ID.SOMETHING_WRONG)}},button_content:GetPSL10NString("ALERT_TRY_AGAIN_BUTTON"),callback:function(){a.ForceScan()}}));DCA_UTIL.lstErrorPageUsageInfo(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[a.Website],
DCA_CONSTANTS.ERROR_ID.TIMEOUT,1)};this.alertMessageInTabContent_busyFixing=function(){this.alertMessageInTabContent(this.ConstructAlertMessageBusyFixing());DCA_UTIL.lstErrorPageUsageInfo(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[this.Website],DCA_CONSTANTS.ERROR_ID.BUSY_FIXING,1)};this.alertMessageInTabContent_forceCloseTab=function(){var a=this;a.alertMessageInTabContent(a.ConstructAlertMessageInContent_titleLink({title:{wording:a.ALERT_FORCE_CLOSE_TAB_TITLE,learnMore:GetPSL10NString("ALERT_UNABLE_TO_OPEN_SETTING_PAGE_LEARN_MORE"),
link_clickEvent:function(){a.open_help_link(DCA_CONSTANTS.HELP_ID.KEEP_SEEING_DONT_CLOSE_TAB)}},button_content:GetPSL10NString("ALERT_TRY_AGAIN_BUTTON"),callback:function(){a.ForceScan()}}))};this.alertMessageInTabContent_anotherUnknownAccount=function(){b.alertMessageInTabContent(b.ConstructAlertMessageInContent({title:b.ALERT_FIND_ANOTHER_ACCOUNT_SUDDENDLY,button_content:GetPSL10NString("OVERLAY_CHECKNOW"),callback:function(){b.Website==GOOGLEPLUS?b.ForceScan({NeedOpenNewTabForcely:!0}):b.ForceScan()}}))};
this.alertMessageOverTabContent_signInAnotherAccount=function(){b.alertMessageOverTabContent(ConstructAlertMessageOverContent({closeButton:!0,closeEvent:function(){b.ForceScan()},title:b.OVERLAY_HAVE_SIGN_IN_ANOTHER_ACCOUNT,buttons:[{title:GetPSL10NString("OVERLAY_OK"),callback:function(){b.Website==GOOGLEPLUS?b.ForceScan({NeedOpenNewTabForcely:!0}):b.ForceScan()}}]}))};this.alertMessageOverTabContent_forceCloseTab=function(){b.alertMessageOverTabContent(ConstructAlertMessageOverContent({closeButton:!0,
closeEvent:function(){b.ForceScan()},title:b.ALERT_FORCE_CLOSE_TAB_TITLE,buttons:[{title:GetPSL10NString("ALERT_TRY_AGAIN_BUTTON"),callback:function(){b.removeMessageOverTabContent();b.alertMessageOverTabContent_loading();b.UI_FixAllSetting(!0,reFixList[b.Website],b.forceOpenNewTabWhenFix)}}]}))};this.alertMessageOverTabContent_confirmPassword=function(){b.alertMessageOverTabContent(ConstructAlertMessageOverContent({closeButton:!0,closeEvent:function(){b.ForceScan()},title:GetPSL10NString("OVERLAY_TWITTER_CONFIRM_PASSWORD"),
buttons:[{title:GetPSL10NString("OVERLAY_OK"),callback:function(){b.ForceScan()}}]}))};this.fixAllPopupClickEvent=function(){for(var a=[],e=b.contentDom.find(".overlay_quickFix_content_ul li:visible"),d=0;d<e.length;d++){var c=TMExt_$.parseJSON(e.eq(d).find(".Setting_display_none").text());a.push({Website:c.Website,id:c.ID,extra:{appIDs:c.appIDs},fix_to:c.Suggestion})}b.removeMessageOverTabContent();b.alertMessageOverTabContent_loading();b.UI_FixAllSetting(!0,a,b.forceOpenNewTabWhenFix)};this.UI_FixSetting=
function(a,e,d,c,k){for(var f=this.Website,h=this.contentDom.find(".ul_concerns_list li"),g=0;g<h.length;g++){for(var l=h.eq(g).find(".privacy_item_content"),n=0;n<l.length;n++){var p=TMExt_$.parseJSON(l.eq(n).find(".Setting_display_none").text());if(p.Website==f&&p.ID==a)break}if(n!=l.length)break}if(g!=h.length||n!=l.length){var m=l.eq(n),h=m.find(".Setting_display_none"),p=TMExt_$.parseJSON(h.text());m.find(".privacy_item_content_selector");var r=this;r.CheckUserLogIn(function(){r.fixSingle(a,
e,d?d:!1,function(d){f==TWITTER?c&&c():(d=0,f==LINKEDIN&&(d=200),setTimeout(function(){r.scanSingle(a,function(a){a:{var d=a[b.ScanSingleResponse].Response;switch(a[b.ScanSingleResponse].ReturnCode){case ReturnCodeEnum.NETWORK_ERROR.code:b.alertMessageInTabContent_networkError();break a;case ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR.code:case ReturnCodeEnum.NOT_LOGGED_IN.code:b.alertMessageInTabContent_signInToFix();break a}d.PossibleValue["0"]||(d.PossibleValue["0"]=GetPSL10NString("SETTING_ITEM_OFF"),
d.PossibleValue["1"]=GetPSL10NString("SETTING_ITEM_ON"));a=m.find("button.subApps");if(0<a.length){a.addClass("dirtyData");var k=[],g=p.Risk;TMExt_$(".waiting").addClass("hidden");m.find("button.subApps").parent().parent().hide();a=0;TMExt_$(".hidenApps").removeClass("hidenApps").show();for(var f in d.appsDetail){a++;var h=m.find("button.subApps."+f);if(a>MAX_SHOW_COUNT){var l=h.parent().parent().parent().parent();l.addClass("hidenApps").hide();l.parent().find(".extendBar").hasClass("unextended")&&
l.css("display","list-item")}h.removeClass("dirtyData");h.attr("responseCurrent",d.appsDetail[f].appLevelNum);m.find("button.subApps."+f+" .privacy_item_content_current_wording").text(d.appsDetail[f].appLevelWording).parent().parent().parent().show();h=m.find("button.subApps."+f+" .privacy_item_content_current_riskImage");h.removeClass("risk").removeClass("safe");isSettingRisky(d.appsDetail[f].appLevelNum,g)?h.addClass("risk"):h.addClass("safe");k.push(d.appsDetail[f].appLevelNum)}f=Math.min.apply(null,
k);k=m.find("button.settingItem .privacy_item_content_current_wording");k.text(d.PossibleValue[f]);m.find("button.settingItem").attr("count",a).attr("responsecurrent",f);a<=MAX_SHOW_COUNT&&TMExt_$(".extendBar").hide();1<a?(TMExt_$("#Application_can_access_your_personal_info").html(GetPSL10NString("CATEGORY_Application_access_plural").replace("%NUM%",'<span class="how_many_app_counts">'+a+"</span>")),TMExt_$(".radioBtnApplyAll label").text(GetPSL10NString("fb_app_titleArea_radio_wording_apply_all").replace("%NUM%",
a))):(TMExt_$("#Application_can_access_your_personal_info").html(GetPSL10NString("CATEGORY_Application_access").replace("%NUM%",'<span class="how_many_app_counts">'+a+"</span>")),TMExt_$(".radioBtnApplyAll label").text(GetPSL10NString("fb_app_titleArea_radio_wording_apply_all_singular")));k=m.find("button.settingItem .privacy_item_content_current_riskImage");k.removeClass("risk").removeClass("safe");isSettingRisky(f,g)?k.addClass("risk"):k.addClass("safe");g=m.find(".Setting_display_none");g.text(TMExt_$.toJSON(d));
1==a&&(TMExt_$("button.subApps").removeClass("button_disabled_silver_inline").css("opacity",1),TMExt_$(".deleteBtn.facebookApp").removeClass("disabled").css("opacity",1),TMExt_$(".radioBtnApplyIndividual").trigger("click"),TMExt_$(".radioBtnApplyAll").hide(),TMExt_$(".radioBtnApplyIndividual").hide(),TMExt_$(".radioBtnApplyIndividual").parent().find(".privacy_item_content_selector.beFacebookApplications").hide());m.find("button.subApps.dirtyData").parent().parent().parent().parent().remove();TMExt_$(".radioBtnApplyAll input")[0].checked?
TMExt_$(".radioBtnApplyAll").trigger("click"):TMExt_$(".radioBtnApplyIndividual").trigger("click")}else d.Current==e&&(m.find(".current_setting_display_none").text(e),k=m.find(".privacy_item_content_current_wording"),k.text(d.PossibleValue[e]),g=m.find(".Setting_display_none"),g.text(TMExt_$.toJSON(d)),g=p.Risk,k.removeClass("risk").removeClass("safe"),isSettingRisky(e,g)?k.addClass("risk"):k.addClass("safe"));c&&c()}})},d))},null,k)},function(){b.alertMessageInTabContent_signInToFix()},function(){b.alertMessageInTabContent_networkError()})}};
this.UI_FixAllSetting=function(a,e,d){var c=this;a&&(reFixList[c.Website]=e);0==e.length?c.DoWhenFinishFixing():c.UI_FixSetting(e[0].id,e[0].fix_to,d,function(){this.forceOpenNewTabMultiTimeWhenFix?c.UI_FixAllSetting(!1,e.slice(1),!0):c.UI_FixAllSetting(!1,e.slice(1),!1)},e[0].extra)};this.checkLogInAndRefreshWrapper=function(){checkLogInTimerList[b.Website]||(checkLogInTimerList[b.Website]=!0,b.checkLogInAndRefresh())};this.checkLogInAndRefresh=function(){b.CheckUserLogIn(function(){b.ForceScan();
checkLogInTimerList[b.Website]=!1},function(){setTimeout(function(){b.checkLogInAndRefresh()},TIME_INTERVAL_NOT_LOG_IN_CHECK_AGAIN)},function(){setTimeout(function(){b.checkLogInAndRefresh()},TIME_INTERVAL_NOT_LOG_IN_CHECK_AGAIN_IF_NETWORK_ERROR)})};this.isOriginalUser=function(a){if(UserWeHaveScanned[b.Website]&&UserWeHaveScanned[b.Website]!=a&&0<b.get_tabContent_Content().find(".alertOverTabContentArea_wrapper_loading").length)return UserWeHaveScanned[b.Website]=a,!1;UserWeHaveScanned[b.Website]=
a;return!0};this.ConstructSaveChangesWrapper=function(a){var e=TMExt_$("<div/>",{"class":"changesMade_wrapper"});e.append(b.ConstructSaveChangesArea(a));return e};this.ConstructSaveChangesArea=function(a){var e=TMExt_$("<div/>",{"class":"changesMade_area"}),d=TMExt_$("<div/>",{"class":"changesMade_area_hitArea"});this.showSaveChangeHints?d.css("marginTop","1px"):d.css("marginTop","8px");d.append(TMExt_$("<span/>",{"class":"changesMade_area_changesMade_wording",text:GetPSL10NString("SAVE_CHANGES_CHANGES_MADE")})).append(TMExt_$("<span/>",
{"class":"changesMade_area_changesMade_number",text:"0"}));this.showSaveChangeHints&&d.append(TMExt_$("<div/>",{"class":"changesMade_area_changesMade_twitterTips",text:this.saveChangeHintsWording}));var c=TMExt_$("<button/>",{"class":"btn_silver changesMade_area_saveChanges",text:GetPSL10NString("SAVE_CHANGES_BUTTON_TITLE")});e.append(c).append(d);c.click(function(){ToolTipHelper.HideTooltip();get_scannerHelper(a).alertMessageOverTabContent_loading();for(var e=get_scannerHelper(a).contentDom.find(".privacy_item_content"),
d=[],c=0;c<e.length;c++){var b=TMExt_$.parseJSON(e.eq(c).find(".Setting_display_none").text()),l=e.eq(c).find(".current_setting_display_none").text();b.Current!=l&&d.push({Website:a,id:b.ID,fix_to:l,extra:{appIDs:b.appIDs}});e.eq(c).hasClass("bFacekookApplications")&&e.eq(c).find("button.subApps").each(function(){var e=TMExt_$(this).attr("responseCurrent"),c=TMExt_$(this).attr("fixTo");c&&Number(c)!=Number(e)&&(e=Number(TMExt_$(this).attr("appId")),d.push({Website:a,id:b.ID,fix_to:Number(c),extra:{appIDs:[e]}}))})}e=
get_scannerHelper(a);e.UI_FixAllSetting(!0,d,e.forceOpenNewTabWhenFix)});return e};this.ConstructContentFromResponse=function(a){var e=this,d=TMExt_$('<div class="scan_result_main"/>'),c=get_Website_fromResponse(a);a=c==FACEBOOK?GetListStyleFacebookData(a[FPScanResponse].Response):a[e.ScanResponse].Response;if(0==a.length)e.alertMessageInTabContent_busyFixing();else{var b=GetHowManyConcerns(a);a=e.FilterListByCategory(a);if(0==b)return c=e.ConstructHaveNoConcerns(),d.append(c),d;b=e.ConstructFixAllArea(b,
function(){e.alertMessageOverTabContent_fixAll();DCA_UTIL.lstLocalPageUsageInfo.nFixAllTimes(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[e.Website],1)});this.contentDom.find(".fix_all_area_wrapper").append(b);c=e.ConstructSaveChangesWrapper(c);d.append(c);c=e.ConstructCategory(a);d.append(c);c=e.ConstructShareAfterScan();d.append(c);return d}};this.ConstructUser=function(a){var e=TMExt_$("<div/>",{"class":"user_area"}),b=TMExt_$("<div/>",{"class":"div_user"}),c=TMExt_$("<div/>",{"class":"div_head_image_area"}),
k=TMExt_$("<img/>",{"class":"div_head_image",src:a.image_url});c.append(k);var f=TMExt_$("<div/>",{"class":"fix_all_area_wrapper"}),h=TMExt_$("<div/>",{"class":"user_area_name",text:a.name}),k=TMExt_$("<div/>",{"class":"clear"}),k=TMExt_$("<div/>",{"class":"div_head_wrapper"}).append(h).append(k).append(c),f=TMExt_$("<div/>",{"class":"div_head"}).append(k).append(f);b.append(f);var g=TMExt_$("<div/>",{"class":"wrongAccount_area"}),f=TMExt_$("<div/>",{"class":"wrongAccount_area_content"}),l=TMExt_$("<div/>",
{"class":"wrongAccount_area_content_arrow"}),n=TMExt_$("<div/>",{"class":"wrongAccount_area_content_frame"}),p=TMExt_$("<div/>",{"class":"wrongAccount_area_content_title",text:GetPSL10NString("WRONGACCOUNT_NOT_USER")}),m=TMExt_$("<div/>",{"class":"wrongAccount_area_content_content",target:"_blank",text:GetPSL10NString("WRONGACCOUNT_SIGN_IN_WITH_THE_RIGHT_ONE")});m.click(function(){var e=get_scannerHelper(a.Website);e.openNewTabWithURL(e.URL_ACCOUNT_PAGE);e.alertMessageOverTabContent_signInAnotherAccount();
DCA_UTIL.lstLocalPageUsageInfo.nSwitchUserClickTimes(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[a.Website],1);g.hide()});n.append(p).append(m);f.append(l).append(n);g.append(f);g.hide();e.append(b);k.append(g);h.on("mouseenter",function(){g.show();g.removeClass("anotherAccount_name");g.removeClass("anotherAccount_image");g.addClass("anotherAccount_name");g.css("left",h.outerWidth()-CSS_anotherAccount_name_gap)});c.on("mouseenter",function(){g.show();g.removeClass("anotherAccount_name");g.removeClass("anotherAccount_image");
g.addClass("anotherAccount_image");g.css("left",CSS_anotherAccount_image_left)});k.on("mouseleave",function(){g.hide()});return e};this.ForceScan=function(a){function e(){c.alertMessageInTabContent_pleaseSignIn()}function b(a){var d=get_Website_fromResponse(a),k=a[c.ScanResponse];f.hide();switch(k.ReturnCode){case ReturnCodeEnum.OK.code:h.append(c.ConstructContentFromResponse(a));c.showContent();IS_SCANING[d]&&(DCA_UTIL.lstLocalPageUsageInfo.nScanTimes(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[d],1),IS_SCANING[d]=
!1);break;case ReturnCodeEnum.WEBRESPONSE_PARSE_ERROR_COULD_USE_PARTLY.code:c.CheckUserLogIn(function(){h.append(c.ConstructContentFromResponse(a));c.showContent();IS_SCANING[d]&&(DCA_UTIL.lstLocalPageUsageInfo.nScanTimes(DCA_CONSTANTS.WEBSITE_OR_BROWSER_ID[d],1),IS_SCANING[d]=!1)},function(){e();c.showContent()},function(){c.alertMessageInTabContent_networkError()});break;case ReturnCodeEnum.NETWORK_ERROR.code:c.alertMessageInTabContent_networkError();c.showContent();break;case ReturnCodeEnum.NOT_LOGGED_IN.code:e();
c.showContent();break;default:PSDebug.error(k.ReturnCode),c.showContent()}}var c=this,k=c.get_tabContent_Loading(),f=c.get_tabContent_Content();f.hide();k.show();ReUpdateUI_Layout();f.empty();var h=TMExt_$("<div/>",{"class":"scanResultArea"});f.append(h);c.UpdateNumberOfConcerns();c.CheckUserLogIn(function(e){e=c.ConstructUser(e);h.append(e);a&&a.NeedOpenNewTabForcely?c.scanOpenNewTabForcely(b):c.scan(b)},e,function(){c.alertMessageInTabContent_networkError()})};this.safari_log_in_learn_more=function(){SendRequestToBackground_openFaqPage(b.Website)};
this.scanOpenNewTabForcely=function(a,e){PSDebug.log("scanOpenNewTabForcely")};this.checkNotLogIn=function(a,e,b){return this.isUserNotLogIn(a)?e():b?b():this.alertMessageInTabContent_busyFixing()};this.getDangerousSettingList=function(){var a=[];TMExt_$.each(this.scanResultTemplate,function(e,b){var c={Website:b.Website,id:b.ID,fix_to:function(){var a=null;TMExt_$.each(b.Risk,function(e,c){if(-1!==TMExt_$.inArray(c,b.possibleFixValue))return a=c,!1});return a}()};null!==c.fix_to&&a.push(c)});return a};
this.resetAllSettingToDangerous=function(){function a(a){TMExt_$.each(a,function(a,e){b.fixSingle(e.id,e.fix_to,!1)})}var e=this.getDangerousSettingList();(function(){var d=e[0];b.fixSingle(d.id,d.fix_to,!0,function(){e.splice(0,1);a(e)})})()};this.SHARE_TITLE=GetPSL10NString("SHARE_TOOTHERS_SNS_TITLE")},s=function(){q.call(this);var b=this;this.Website=FACEBOOK;this.HostOfFacebookAPI="https://graph.facebook.com/";this.contentDom=TMExt_$("#tabsContent_facebook");this.tabDom=TMExt_$("#tabs_facebook");
this.CheckUserLogIn=function(a,e,d){SendWebRequest({type:"GET",data:null,dataType:"html",url:this.URL_CHECKLOGIN_PAGE},function(c){function k(){SendWebRequest({type:"GET",data:null,dataType:"html",url:"https://www.facebook.com"},function(e){try{var c=e.match(/\x3c!--([\w\W\n]*?)--\x3e/gm);for(e=0;e<c.length;e++)if(0<c[e].indexOf("fbxWelcomeBoxName")){var d=c[e].replace("\x3c!--","").replace("--\x3e",""),k=TMExt_$(d);g.name=k.find(".fbxWelcomeBoxName").text();break}g.image_url=b.HostOfFacebookAPI+
h+"/picture";return a(g)}catch(f){return b.alertMessageInTabContent_busyFixing()}},d)}var f=TMExt_$(c),h=(new FacebookScannerHelper).getUserIDFromHtml(c);if(!h)return b.checkNotLogIn(c,e);if(!b.isOriginalUser(h)&&!checkLogInTimerList[b.Website])return b.alertMessageInTabContent_anotherUnknownAccount();var g={};g.user_id=h;g.Website="FACEBOOK";try{var l=f.find('#pagelet_bluebar ul[role="navigation"] li:first a span').text(),n=f.find('#pagelet_bluebar ul[role="navigation"] li:first a img').attr("src");
if(l&&n&&""!=l&&""!=n)return g.name=l,g.image_url=n,a(g);k()}catch(p){k()}},d)};this.isUserNotLogIn=function(a){return 1<=TMExt_$(a).find("input#email").length};this.scanSingle=function(a,e,b){(new FacebookPScanner).scanSingle(a,e)};this.scan=function(a,e){(new FacebookPScanner).scan(a)};this.fixSingle=function(a,e,b,c,k,f){SendRequestToBackground_Website(c,k,"fix_single","ContentPage_Background_FACEBOOK",{id:a,value:e,extra:f},FACEBOOK,this.URL_SETTING_PAGE,!1,b)};this.scanResultTemplate=FacebookScanResultsTemplate;
this.ScanSingleResponse=FPScanSingleResponse;this.ScanResponse=FPScanResponse;this.FixSingleResponse=FPFixSingleResponse;this.URL_SETTING_PAGE=URL_LIST.FACEBOOK.URL_SETTING_PAGE;this.URL_CHECKLOGIN_PAGE=URL_LIST.FACEBOOK.URL_CHECKLOGIN_PAGE;this.URL_ACCOUNT_PAGE=URL_LIST.FACEBOOK.URL_ACCOUNT_PAGE;this.OVERLAY_HAVE_SIGN_IN_ANOTHER_ACCOUNT=GetPSL10NString("OVERLAY_FACEBOOK_HAVE_SIGN_IN_ANOTHER_ACCOUNT");this.OVERLAY_REMOVE_FACEBOOK_APPLICATION=GetPSL10NString("OVERLAY_REMOVE_FACEBOOK_APPLICATION");
this.forceOpenNewTabWhenFix=!0;this.ALERT_FORCE_CLOSE_TAB_TITLE=GetPSL10NString("OVERLAY_DO_NOT_CLOSE_THE_TAB_FACEBOOK_SCAN");this.ALERT_FIND_ANOTHER_ACCOUNT_SUDDENDLY=GetPSL10NString("OVERLAY_FACEBOOK_FIND_ANOTHER_ACCOUNT_SUDDENDLY");this.alertLogoClassName="alert_logo_FACEBOOK"},t=function(){q.call(this);var b=this;this.Website=TWITTER;this.contentDom=TMExt_$("#tabsContent_twitter");this.tabDom=TMExt_$("#tabs_twitter");this.CheckUserLogIn=function(a,d,c){SendWebRequest({type:"GET",data:null,dataType:"html",
url:this.URL_CHECKLOGIN_PAGE},function(c){var f=TMExt_$(c),h=new TwitterPScanner,g=h.getUserID(f);if(!g)return b.checkNotLogIn(c,d);if(!b.isOriginalUser(g)&&!checkLogInTimerList[b.Website])return b.alertMessageInTabContent_anotherUnknownAccount();c={};c.user_id=g;c.Website="TWITTER";c.name=h.getUserName(f);c.image_url=h.getUserImageURL(f);a(c)},c)};this.isUserNotLogIn=function(a){return 1<=TMExt_$(a).find("input[name='session[username_or_email]']").length};this.scanSingle=function(a,b,c){(new TwitterPScanner).scanSingle(a,
b)};this.scan=function(a,b){(new TwitterPScanner).scan(a)};this.fixSingle=function(a,b,c,k,f){SendRequestToBackground_Website(k,f,"fix_single","ContentPage_Background_TWITTER",{id:a,value:b},TWITTER,this.URL_SETTING_PAGE,!0,c)};this.scanResultTemplate=TwitterScanResultsTemplate;this.ScanSingleResponse=TPScanSingleResponse;this.ScanResponse=TPScanResponse;this.FixSingleResponse=TPFixSingleResponse;this.URL_SETTING_PAGE=URL_LIST.TWITTER.URL_SETTING_PAGE;this.URL_CHECKLOGIN_PAGE=URL_LIST.TWITTER.URL_CHECKLOGIN_PAGE;
this.URL_ACCOUNT_PAGE=URL_LIST.TWITTER.URL_ACCOUNT_PAGE;this.OVERLAY_HAVE_SIGN_IN_ANOTHER_ACCOUNT=GetPSL10NString("OVERLAY_TWITTER_HAVE_SIGN_IN_ANOTHER_ACCOUNT");this.forceOpenNewTabWhenFix=!0;this.UI_FixAllSetting=function(a,d,c){return TwitterIsNeedToShowPromotePS()?b.alertMessageOverTabContent_promoteUserInputPS(a,d,c):b.do_UI_FixAllSetting(a,d,c)};this.do_UI_FixAllSetting=function(a,d,c){a&&(reFixList[b.Website]=d);0==d.length?(b.alertMessageOverTabContent_confirmPassword(),b.fixSingle("SAVE",
0,c,function(a){})):b.UI_FixSetting(d[0].id,d[0].fix_to,c,function(){b.do_UI_FixAllSetting(!1,d.slice(1),!1)})};this.ALERT_FORCE_CLOSE_TAB_TITLE=GetPSL10NString("OVERLAY_DO_NOT_CLOSE_THE_TAB_TWITTER_SCAN");this.ALERT_FIND_ANOTHER_ACCOUNT_SUDDENDLY=GetPSL10NString("OVERLAY_TWITTER_FIND_ANOTHER_ACCOUNT_SUDDENDLY");this.alertMessageOverTabContent_promoteUserInputPS=function(a,d,c){b.alertMessageOverTabContent(ConstructAlertMessageOverContent({title:GetPSL10NString("OVERLAY_PROMOTE_USER_INPUT_PASSWORD"),
buttons:[{title:GetPSL10NString("OVERLAY_OK"),callback:function(){b.removeMessageOverTabContent();b.alertMessageOverTabContent_loading();b.do_UI_FixAllSetting(a,d,c)}}],checkBox:{title:GetPSL10NString("OVERLAY_PROMOTE_USER_INPUT_PASSWORD_CHECKBOX_TITLE"),callback:function(a){TwitterSetShowPromotePS(!a)}}}))};this.alertLogoClassName="alert_logo_TWITTER";this.showSaveChangeHints=!0;this.saveChangeHintsWording=GetPSL10NString("SAVE_CHANGES_TWITTER_HINT");var a;a=PUtil.checkBrowser.IsIE_9()||PUtil.checkBrowser.IsIELowerThan_9()?
!1:!0;a||this.alertMessageInTabContent(this.ConstructAlertMessageTwitterOnIE9())},u=function(){q.call(this);var b=this;this.Website=GOOGLEPLUS;this.contentDom=TMExt_$("#tabsContent_googlePlus");this.tabDom=TMExt_$("#tabs_googlePlus");this.CheckUserLogIn=function(a,d,c){SendWebRequest({type:"GET",data:null,dataType:"html",url:this.URL_CHECKLOGIN_PAGE},function(c){var f={Website:"GOOGLEPLUS",name:"",image_url:""};try{var h=TMExt_$(c).find('img[data-src*="s48-c-mo/photo.jpg"]');if(0===h.length)f.name=
"",f.image_url="";else{var h=h.eq(0),g=("https:"+h.attr("data-src")).split("/");1<g.length&&(g[g.length-2]=g[g.length-2].replace("48","50"),f.image_url=g.join("/"));f.name=h.next().find("div").eq(0).text()}}catch(l){f.name="",f.image_url=""}return""!=f.name&&""!=f.image_url?(c=b.isOriginalUser(f.name)||checkLogInTimerList[b.Website]?a(f):b.alertMessageInTabContent_anotherUnknownAccount(),c):d()},c)};this.scanSingle=function(a,b,c){SendRequestToBackground_Website(b,c,"scan_single","ContentPage_Background_GOOGLEPLUS",
{id:a},GOOGLEPLUS,this.URL_SETTING_PAGE,!1,!1)};this.scan=function(a,b){PUtil.checkBrowser.IsIE()?SendRequestToBackground_Website(a,b,"scan_all","ContentPage_Background_GOOGLEPLUS",null,GOOGLEPLUS,this.URL_SETTING_PAGE,!1,!0):SendRequestToBackground_Website(a,b,"scan_all","ContentPage_Background_GOOGLEPLUS",null,GOOGLEPLUS,this.URL_SETTING_PAGE,!1,!1)};this.scanOpenNewTabForcely=function(a,b){SendRequestToBackground_Website(a,b,"scan_all","ContentPage_Background_GOOGLEPLUS",null,GOOGLEPLUS,this.URL_SETTING_PAGE,
!1,!0)};this.fixSingle=function(a,b,c,k,f){SendRequestToBackground_Website(k,f,"fix_single","ContentPage_Background_GOOGLEPLUS",{id:a,value:b},GOOGLEPLUS,this.URL_SETTING_PAGE,!1,c)};this.scanResultTemplate=GooglePlusScanResultsTemplate;this.ScanSingleResponse=GPPScanSingleResponse;this.ScanResponse=GPPScanResponse;this.FixSingleResponse=GPPFixSingleResponse;this.URL_SETTING_PAGE=URL_LIST.GOOGLEPLUS.URL_SETTING_PAGE;this.URL_CHECKLOGIN_PAGE=URL_LIST.GOOGLEPLUS.URL_CHECKLOGIN_PAGE;this.URL_ACCOUNT_PAGE=
URL_LIST.GOOGLEPLUS.URL_ACCOUNT_PAGE;this.OVERLAY_HAVE_SIGN_IN_ANOTHER_ACCOUNT=GetPSL10NString("OVERLAY_GOOGLEPLUS_HAVE_SIGN_IN_ANOTHER_ACCOUNT");this.forceOpenNewTabWhenFix=!0;this.ALERT_FORCE_CLOSE_TAB_TITLE=GetPSL10NString("OVERLAY_DO_NOT_CLOSE_THE_TAB_GOOGLEPLUS_SCAN");this.ALERT_FIND_ANOTHER_ACCOUNT_SUDDENDLY=GetPSL10NString("OVERLAY_GOOGLEPLUS_FIND_ANOTHER_ACCOUNT_SUDDENDLY");this.alertLogoClassName="alert_logo_GOOGLEPLUS";var a;a=PUtil.checkBrowser.IsIE_8()||PUtil.checkBrowser.IsIELowerThan_8()?
!1:!0;a||this.alertMessageInTabContent(this.ConstructAlertMessageGooglePonIE8())},v=function(){q.call(this);var b=this;this.Website=LINKEDIN;this.contentDom=TMExt_$("#tabsContent_linkedin");this.tabDom=TMExt_$("#tabs_linkedin");this.CheckUserLogIn=function(a,e,d){function c(k){SendWebRequest({type:"GET",data:null,dataType:"html",url:k},function(d){var h=TMExt_$(d);if(0!==h.find('input[name="signin"]').length||0!==h.find("#register-custom-nav").length||0!==h.find(".join-btn").length)return e();d={};
try{d.Website="LINKEDIN";d.name=TMExt_$.trim(h.find(".self .act-set-name").eq(0).text());var g=h.find(".self .act-set-icon-image img").eq(0),h="",k=g.attr("data-li-src"),h="undefined"!==typeof k&&!1!==k?k:g.attr("src"),h=h.replace("_30x30","_200x200");d.image_url=h;return b.isOriginalUser(d.name)||checkLogInTimerList[b.Website]?a(d):b.alertMessageInTabContent_anotherUnknownAccount()}catch(n){if(0==flag)c("http://www.linkedin.com"),flag=1;else return e()}},d)}flag=0;c(this.URL_CHECKLOGIN_PAGE)};this.scanSingle=
function(a,b,d){(new LinkedinPScanner).scanSingle(a,b)};this.scan=function(a,b){(new LinkedinPScanner).scan(a)};this.fixSingle=function(a,b,d,c,k){SendRequestToBackground_Website(c,k,"fix_single","ContentPage_Background_LINKEDIN",{id:a,value:b},LINKEDIN,this.URL_FIX_SETTING_PAGE[a],!1,d)};this.scanResultTemplate=LinkedinScanResultsTemplate;this.ScanSingleResponse=LIPScanSingleResponse;this.ScanResponse=LIPScanResponse;this.FixSingleResponse=LIPFixSingleResponse;this.URL_SETTING_PAGE=URL_LIST.LINKEDIN.URL_SETTING_PAGE;
this.URL_FIX_SETTING_PAGE=URL_LIST.LINKEDIN.URL_FIX_SETTING_PAGE;this.URL_CHECKLOGIN_PAGE=URL_LIST.LINKEDIN.URL_CHECKLOGIN_PAGE;this.URL_ACCOUNT_PAGE=URL_LIST.LINKEDIN.URL_ACCOUNT_PAGE;this.OVERLAY_HAVE_SIGN_IN_ANOTHER_ACCOUNT=GetPSL10NString("OVERLAY_LINKEDIN_HAVE_SIGN_IN_ANOTHER_ACCOUNT");this.forceOpenNewTabMultiTimeWhenFix=this.forceOpenNewTabWhenFix=!0;this.alertMessageOverTabContent_promoteUserInputPS=function(a,b,d){var c=this;c.alertMessageOverTabContent(ConstructAlertMessageOverContent({title:GetPSL10NString("OVERLAY_PROMOTE_USER_INPUT_PASSWORD_LINKEDIN"),
buttons:[{title:GetPSL10NString("OVERLAY_OK"),callback:function(){c.removeMessageOverTabContent();c.alertMessageOverTabContent_loading();c.do_UI_FixAllSetting_withConfirmResultPopup(a,b,d)}}],checkBox:{title:GetPSL10NString("OVERLAY_PROMOTE_USER_INPUT_PASSWORD_CHECKBOX_TITLE"),callback:function(a){LinkedinSetShowPromotePS(!a)}}}))};this.checkSettingPageLoggedIn=function(a,b,d){SendWebRequest({type:"GET",data:null,dataType:"html",url:this.URL_SETTING_PAGE},function(c){c=TMExt_$(c);return 0!==c.find('input[name="signin"]').length||
0!==c.find("#register-custom-nav").length||0!==c.find(".join-btn").length?b():a()},d)};this.UI_FixAllSetting=function(a,b,d){var c=this;this.checkSettingPageLoggedIn(function(){return c.do_UI_FixAllSetting_normal(a,b,d)},function(){return c.do_UI_FixAllSetting_notLoggedIn(a,b,d)},function(){return c.alertMessageInTabContent_networkError()})};this.do_UI_FixAllSetting_normal=function(a,b,d){var c=this;a&&(reFixList[c.Website]=b);0==b.length?c.DoWhenFinishFixing():c.UI_FixSetting(b[0].id,b[0].fix_to,
d,function(){c.do_UI_FixAllSetting_normal(!1,b.slice(1),!0)})};this.do_UI_FixAllSetting_notLoggedIn=function(a,e,d){return LinkedinIsNeedToShowPromotePS()?b.alertMessageOverTabContent_promoteUserInputPS(a,e,d):b.do_UI_FixAllSetting_withConfirmResultPopup(a,e,d)};this.do_UI_FixAllSetting_withConfirmResultPopup=function(a,e,d){a&&(reFixList[b.Website]=e);0==e.length?b.alertMessageOverTabContent_confirmPassword():b.UI_FixSetting(e[0].id,e[0].fix_to,d,function(){b.do_UI_FixAllSetting_withConfirmResultPopup(!1,
e.slice(1),!1)})};this.alertMessageOverTabContent_confirmPassword=function(){var a=this;a.alertMessageOverTabContent(ConstructAlertMessageOverContent({closeButton:!0,closeEvent:function(){a.ForceScan()},title:GetPSL10NString("OVERLAY_LINKEDIN_CONFIRM_PASSWORD"),buttons:[{title:GetPSL10NString("OVERLAY_OK"),callback:function(){a.ForceScan()}}]}))};this.ALERT_FORCE_CLOSE_TAB_TITLE=GetPSL10NString("OVERLAY_DO_NOT_CLOSE_THE_TAB_LINKEDIN_SCAN");this.ALERT_FIND_ANOTHER_ACCOUNT_SUDDENDLY=GetPSL10NString("OVERLAY_LINKEDIN_FIND_ANOTHER_ACCOUNT_SUDDENDLY");
this.alertLogoClassName="alert_logo_LINKEDIN"}})();
